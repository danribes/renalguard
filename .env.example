# RENALGUARD AI - Environment Variables Template
# Supports both Docker Compose (local) and Cloudflare (production) deployments

# ============================================
# Backend Configuration
# ============================================

# Node environment (development, production, test)
NODE_ENV=development

# Server port (default: 3000)
PORT=3000

# ============================================
# MCP Server Configuration
# ============================================

# MCP Server port (default: 3001)
MCP_SERVER_PORT=3001

# MCP Server URL (for backend to connect)
# Docker Compose: http://mcp-server:3001
# Cloudflare: Set via dashboard (internal container URL)
MCP_SERVER_URL=http://mcp-server:3001

# ============================================
# Database Configuration
# ============================================

# PostgreSQL connection string
# Docker Compose: postgresql://USER:PASS@postgres:5432/healthcare_ai_db
# Cloudflare: Use Hyperdrive connection string (hyperdrive://HYPERDRIVE_ID)
# Neon: postgresql://USER:PASS@ep-xxx.neon.tech/dbname?sslmode=require
DATABASE_URL=postgresql://healthcare_user:healthcare_pass@postgres:5432/healthcare_ai_db

# Individual database connection parameters (alternative to DATABASE_URL)
DB_HOST=postgres
DB_PORT=5432
DB_NAME=healthcare_ai_db
DB_USER=healthcare_user
DB_PASSWORD=healthcare_pass

# ============================================
# AI Service Configuration
# ============================================

# Anthropic API Key (Claude AI)
# Get your key from: https://console.anthropic.com
# REQUIRED for AI risk analysis features
ANTHROPIC_API_KEY=sk-ant-api03-your-key-here

# Claude model version (optional, defaults to claude-sonnet-4-20250514)
# CLAUDE_MODEL=claude-sonnet-4-20250514

# AI request timeout in milliseconds (optional, default: 30000)
# AI_TIMEOUT=30000

# ============================================
# CORS Configuration
# ============================================

# Allowed origins for CORS (comma-separated)
# Docker Compose (local):
CORS_ORIGIN=http://localhost:8080,http://localhost:5173

# Cloudflare Production (example):
# CORS_ORIGIN=https://renalguard.pages.dev,https://your-custom-domain.com

# ============================================
# Frontend Configuration (Vite)
# ============================================

# Backend API URL (used by frontend to connect to backend)
# Docker Compose (local): http://localhost:3000
# Cloudflare: https://renalguard-backend.<account>.cloudflare.dev
VITE_API_URL=http://localhost:3000

# ============================================
# Cloudflare Configuration (Production)
# ============================================

# Cloudflare Account ID (for deployment)
# CLOUDFLARE_ACCOUNT_ID=your-account-id

# Cloudflare API Token (for Wrangler CLI)
# CLOUDFLARE_API_TOKEN=your-api-token

# Hyperdrive ID (for database connection pooling)
# HYPERDRIVE_ID=your-hyperdrive-id

# ============================================
# Optional: Advanced Configuration
# ============================================

# Logging level (error, warn, info, debug)
# LOG_LEVEL=info

# Maximum request body size (default: 10mb)
# MAX_REQUEST_SIZE=10mb

# Rate limiting (requests per minute per IP)
# RATE_LIMIT=100

# ============================================
# Docker Compose Overrides (Local Development)
# ============================================

# Custom PostgreSQL password (override docker-compose.yml)
# POSTGRES_PASSWORD=your-custom-password

# Custom database name
# POSTGRES_DB=custom_db_name

# Custom database user
# POSTGRES_USER=custom_user

# ============================================
# Instructions
# ============================================

# LOCAL DEVELOPMENT (Docker Compose):
# 1. Copy this file to .env in project root:
#    cp .env.example .env
#
# 2. Update ANTHROPIC_API_KEY with your actual API key
#
# 3. Start services:
#    docker-compose up -d
#
# 4. Verify environment variables loaded:
#    docker-compose exec backend env | grep ANTHROPIC_API_KEY

# CLOUDFLARE DEPLOYMENT:
# 1. Create accounts on Cloudflare and Neon (or Supabase)
#
# 2. Set up Hyperdrive:
#    wrangler hyperdrive create renalguard-db --connection-string="YOUR_NEON_URL"
#
# 3. Configure secrets in Cloudflare dashboard:
#    - ANTHROPIC_API_KEY
#    - DATABASE_URL (Hyperdrive connection string)
#
# 4. Deploy frontend to Cloudflare Pages:
#    cd frontend && wrangler pages deploy dist
#
# 5. Deploy containers to Cloudflare Containers

# ============================================
# Security Notes
# ============================================

# - Never commit .env file to version control
# - Never share your .env file with others
# - Rotate API keys regularly
# - Use different keys for development and production
# - Keep database passwords strong and unique
# - Review .gitignore to ensure .env is excluded
# - In Cloudflare, use encrypted secrets for sensitive values

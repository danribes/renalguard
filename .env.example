# RENALGUARD AI - Environment Variables Template
# Supports both Docker Compose (local) and Cloudflare (production) deployments

# ============================================
# Backend Configuration
# ============================================

# Node environment (development, production, test)
NODE_ENV=development

# Server port (default: 3000)
PORT=3000

# ============================================
# MCP Server Configuration
# ============================================

# MCP Server port (default: 3001)
MCP_SERVER_PORT=3001

# MCP Server URL (for backend to connect)
# Docker Compose: http://mcp-server:3001
# Cloudflare: Set via dashboard (internal container URL)
MCP_SERVER_URL=http://mcp-server:3001

# ============================================
# Database Configuration (Neon)
# ============================================

# PostgreSQL connection string
# Neon: postgresql://USER:PASS@ep-xxx.neon.tech/dbname?sslmode=require
# Cloudflare: Use Hyperdrive connection string (hyperdrive://HYPERDRIVE_ID)
DATABASE_URL=postgresql://neondb_owner:YOUR_PASSWORD@ep-xxx.neon.tech/neondb?sslmode=require

# Neon API Key (for MCP server)
NEON_API_KEY=napi_your_neon_api_key_here

# Individual database connection parameters (alternative to DATABASE_URL)
DB_HOST=ep-xxx.neon.tech
DB_PORT=5432
DB_NAME=neondb
DB_USER=neondb_owner
DB_PASSWORD=your_password_here

# ============================================
# AI Service Configuration (Anthropic)
# ============================================

# Anthropic API Key (Claude AI)
# Get your key from: https://console.anthropic.com
# REQUIRED for AI risk analysis features
ANTHROPIC_API_KEY=sk-ant-api03-your-key-here

# Claude model version (optional, defaults to claude-sonnet-4-20250514)
# CLAUDE_MODEL=claude-sonnet-4-20250514

# AI request timeout in milliseconds (optional, default: 30000)
# AI_TIMEOUT=30000

# ============================================
# Email Service (Resend)
# ============================================

# Resend API Key for transactional emails
# Get your key from: https://resend.com
RESEND_API_KEY=re_your_resend_api_key_here

# ============================================
# Payment Processing (Stripe)
# ============================================

# Stripe Test Keys (for development)
STRIPE_PUBLISHABLE_KEY=pk_test_your_publishable_key
STRIPE_SECRET_KEY=sk_test_your_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Stripe Live Keys (for production)
STRIPE_LIVE_PUBLISHABLE_KEY=pk_live_your_live_publishable_key
STRIPE_LIVE_SECRET_KEY=sk_live_your_live_secret_key

# ============================================
# Cache (Redis/Upstash)
# ============================================

# Upstash Redis REST API
UPSTASH_REDIS_REST_URL=https://your-redis.upstash.io
UPSTASH_REDIS_REST_TOKEN=your_upstash_token_here

# Redis connection string (alternative)
REDIS_URL=rediss://default:your_token@your-redis.upstash.io:6379

# ============================================
# Authentication & OAuth
# ============================================

# GitHub Personal Access Token
GITHUB_TOKEN=ghp_your_github_token_here

# LinkedIn OAuth
LINKEDIN_CLIENT_ID=your_linkedin_client_id
LINKEDIN_CLIENT_SECRET=your_linkedin_client_secret

# ============================================
# CORS Configuration
# ============================================

# Allowed origins for CORS (comma-separated)
# Docker Compose (local):
CORS_ORIGIN=http://localhost:8080,http://localhost:5173

# Cloudflare Production (example):
# CORS_ORIGIN=https://renalguard.pages.dev,https://your-custom-domain.com

# ============================================
# Frontend Configuration (Vite)
# ============================================

# Backend API URL (used by frontend to connect to backend)
# Docker Compose (local): http://localhost:3000
# Cloudflare: https://renalguard-backend.<account>.cloudflare.dev
VITE_API_URL=http://localhost:3000

# ============================================
# Cloudflare Configuration (Production)
# ============================================

# Cloudflare Account ID (for deployment)
CLOUDFLARE_ACCOUNT_ID=your-account-id

# Cloudflare API Token (for Wrangler CLI)
CLOUDFLARE_API_TOKEN=your-api-token

# Hyperdrive ID (for database connection pooling)
HYPERDRIVE_ID=your-hyperdrive-id

# ============================================
# External Services
# ============================================

# Vercel Token (if using Vercel)
VERCEL_TOKEN=your_vercel_token_here

# Render API Key (legacy, if needed)
# RENDER_API_KEY=your_render_api_key_here

# ============================================
# Optional: Advanced Configuration
# ============================================

# Logging level (error, warn, info, debug)
# LOG_LEVEL=info

# Maximum request body size (default: 10mb)
# MAX_REQUEST_SIZE=10mb

# Rate limiting (requests per minute per IP)
# RATE_LIMIT=100

# ============================================
# Docker Compose Overrides (Local Development)
# ============================================

# Custom PostgreSQL password (override docker-compose.yml)
# POSTGRES_PASSWORD=your-custom-password

# Custom database name
# POSTGRES_DB=custom_db_name

# Custom database user
# POSTGRES_USER=custom_user

# ============================================
# Instructions
# ============================================

# LOCAL DEVELOPMENT (Docker Compose):
# 1. Copy this file to .env in project root:
#    cp .env.example .env
#
# 2. Update the credentials with your actual values
#
# 3. Start services:
#    docker-compose up -d
#
# 4. Verify environment variables loaded:
#    docker-compose exec backend env | grep ANTHROPIC_API_KEY

# CLOUDFLARE DEPLOYMENT:
# 1. Create accounts on Cloudflare and Neon
#
# 2. Set up Hyperdrive:
#    wrangler hyperdrive create renalguard-db --connection-string="YOUR_NEON_URL"
#
# 3. Configure secrets in Cloudflare dashboard or via CLI:
#    wrangler pages secret put ANTHROPIC_API_KEY
#    wrangler pages secret put DATABASE_URL
#    (etc.)
#
# 4. Deploy frontend to Cloudflare Pages:
#    cd frontend && wrangler pages deploy dist
#
# 5. Deploy containers to Cloudflare Containers

# ============================================
# Security Notes
# ============================================

# - Never commit .env file to version control
# - Never share your .env file with others
# - Rotate API keys regularly
# - Use different keys for development and production
# - Keep database passwords strong and unique
# - Review .gitignore to ensure .env is excluded
# - In Cloudflare, use encrypted secrets for sensitive values
# - Use test keys for development, live keys for production
